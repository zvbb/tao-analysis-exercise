\documentclass{article}
\usepackage{mathtools} 
\usepackage{fontspec}
\usepackage[UTF8]{ctex}
\usepackage{amsthm}
\usepackage{mdframed}
\usepackage{xcolor}
\usepackage{amssymb}
\usepackage{amsmath}


% 定义新的带灰色背景的说明环境 zremark
\newmdtheoremenv[
  backgroundcolor=gray!10,
  % 边框与背景一致，边框线会消失
  linecolor=gray!10
]{zremark}{说明}


\begin{document}
\title{11.6 习题}
\author{张志聪}
\maketitle

\section*{11.6.1}

证明框架参考了命题11.5.3的证明。

如果$I$是一个单点集或者空集，那么结论是平凡的。如果$I$是一个闭区间，那么根据命题11.6.1可以得到结论。
于是我们假设$I$是形如$(a, b], (a, b)$或$[a, b)$的区间，其中$a < b$。

设$M$是$f$的界，所以对所有的$x \in I$均有$-M \leq f(x) \leq M$。现在设$0 < \epsilon < (b - a)/2$是一个很小的数。
当$f$被限制在区间$[a + \epsilon, b - \epsilon]$上时，它就是单调有界的，从而再次利用11.6.1可知，它是黎曼可积的。
特别地，我们能够找到一个分段常数函数$h: [a + \epsilon, b - \epsilon]$上从上方控制$f$，并且有
\begin{align*}
  \int_{[a + \epsilon, b - \epsilon]} h \leq \int_{[a + \epsilon, b - \epsilon]} f + \epsilon
\end{align*}
定义$\widetilde{h} : I \to \mathbb{R}$为
\begin{equation*}
  \widetilde{h}(x) =
  \begin{cases*}
    h(x), x \in [a + \epsilon, b - \epsilon] \\
    M, x \in I \setminus [a + \epsilon, b - \epsilon]
  \end{cases*}
\end{equation*}
$\widetilde{h}$显然是$I$上从上方控制$f$的分段常数函数。根据定理11.2.16可知，
\begin{align*}
  \int_{I}\widetilde{h}  = \epsilon M + \int_{[a + \epsilon, b - \epsilon]} h + \epsilon M
  \leq \int_{[a + \epsilon, b - \epsilon]} f + (2M + 1)\epsilon
\end{align*}

特别地
\begin{align*}
  \overline{\int}_I f \leq \int_{[a + \epsilon, b - \epsilon]} f + (2M + 1)\epsilon
\end{align*}

类似地，有
\begin{align*}
  \underline{\int}_I f \geq \int_{[a + \epsilon, b - \epsilon]} f - (2M + 1)\epsilon
\end{align*}
从而

\begin{align*}
  \overline{\int}_I f - \underline{\int}_I f\leq (4M + 2)\epsilon
\end{align*}
综上由$\epsilon$的任意性且$\overline{\int}_I f - \underline{\int}_I f$与$\epsilon$无关可得，$f$是黎曼可积的。


\section*{11.6.2}
（1）分段单调函数的定义参考定义11.5.4：

设$I$是有一个有界区间，并设$f: I \to \mathbb{R}$。我们称$f$在$I$上是有界分段单调函数，当且仅当存在一个$I$的划分$P$，
使得对于所有的$J \in P$，$f|_J$都是$J$上的单调有界函数。

（2）由（1）可知存在一个$I$的划分$P$，使得对于所有的$J \in P$，$f|_J$都是$J$上的单调有界函数。
于是对任意$J \in P$，由推论11.6.3可知$f|_J$在$J$上是黎曼可积的。剩余部分的证明与习题11.5.1类似，这里不做赘述。

\section*{11.6.3}

注意这里无法假设$N$是正整数。

\begin{itemize}
  \item $\Rightarrow$

        因为$x \geq 0, f(x) \geq 0$，可知$\int_{[0, N]} f$是关于实数$N$的单调递增函数，
        由定理5.5.9（最小上界的存在性）可知只要证明其有上界，则最小上界存在且有限。

        由推论11.6.3可知$\int_{[0, N]} f$在$[0, N]$上是黎曼可积的。

        由推论5.4.12和命题4.4.1可知，对实数$N$存在一个自然数$n$使得$n \leq N < n + 1$，
        现在把$[0, N]$划分成$n+1$个半开区间
        \begin{align*}
          \{[0, 1), [1, 2),...,[n-1, n), [n, N]\}
        \end{align*}

        由命题11.3.12可知
        \begin{align*}
          \overline{\int}_{[0, N]} f & \leq \sum\limits_{j=0}^{n} \left( \sup\limits_{x \in [j, j+1)} f(x)  \right)
          + \sup\limits_{x \in [n, N]} f(x)                                                                         \\
                                     & \leq \sum\limits_{j=0}^{n + 1} f(j)
        \end{align*}
        以上最后一个等式由$f: [0, +\infty) \to \mathbb{R}$是一个单调递增的函数保证的。

        因为对任意的$x \in [0, +\infty), f(x) \geq 0$，由定理11.4.1(d)可知
        \begin{align*}
          \int_{[0, N]} f  \geq 0
        \end{align*}


        综上，对任意$N > 0$都有
        \begin{align*}
          0 \leq \underline{\int}_{[0, N]} f \leq \overline{\int}_{[0, N]} f \leq \sum\limits_{j=0}^{n + 1} f(j)
        \end{align*}
        即
        \begin{align*}
          0 \leq \int_{[0, N]} f \leq \sum\limits_{j=0}^{n + 1} f(j)
        \end{align*}

        不妨设$\sum\limits_{n = 0}^\infty f(n)$收敛于$L$，于是对任意$N$都有
        \begin{align*}
          0 \leq \int_{[0, N]} f \leq  L
        \end{align*}
        $\int_{[0, N]} f$是有界的，于是命题成立。

  \item $\Leftarrow$

        反证法，假设$\sum \limits_{n=0}^\infty$是发散的。
        那么，对任意实数$M$都存在正整数$N$使得
        \begin{align*}
          \sum \limits_{n=0}^{N} > M
        \end{align*}
        现在把$[0, N]$划分成$N+1$个半开区间
        \begin{align*}
          \{[0, 1), [1, 2),...,[n-1, n), [n, N), \{N\}\}
        \end{align*}

        由命题11.3.12可知
        \begin{align*}
          \underline{\int}_{[0, N]} f & \geq \sum\limits_{j=0}^{N} \left( \inf\limits_{x \in [j, j+1)} f(x)  \right) \\
                                      & \geq \sum\limits_{j=1}^{N} f(j) = M - f(0)
        \end{align*}
        因为$M$是任取的，而$f(0)$是固定值，于是可得$\underline{\int}_{[0, N]} f$是无限的，
        这与题设矛盾。
\end{itemize}

\section*{11.6.4}

（1）
函数$f : [0, +\infty) \to \mathbb{R}$为
\begin{equation*}
  f(x) =
  \begin{cases*}
    x, x \in \mathbb{N} \\
    0, x \notin \mathbb{N}
  \end{cases*}
\end{equation*}
此时$\sup\limits_{N > 0}\int_{[0, N]} f = 0$，而$\sum\limits_{n=0}^\infty f(n)$是发散的。

（2）
反过来定义刚才的函数
\begin{equation*}
  f(x) =
  \begin{cases*}
    0, x \in \mathbb{N} \\
    x, x \notin \mathbb{N}
  \end{cases*}
\end{equation*}
此时$\sum\limits_{n=0}^\infty f(n) = 0$，而$\sup\limits_{N > 0}\int_{[0, N]} f = +\infty$。

\section*{11.6.5}

令$f: [1, +\infty) \to \mathbb{R}, f(x) = \frac{1}{x^q}$。

（1）$p > 1$

由引理5.6.9(d)可知，$x > 0$时，$\frac{1}{x^q}$是非负且递减的，
由命题5.4.12可知，存在正整数$N^\prime$使得$q \leq N^\prime$。

由命题11.6.4（积分判别法）可知，只需证明$\sup\limits_{N > 1}\int_{[1, N]} \frac{1}{x^q}$是有界的即可证明该命题。

类似于习题11.6.3的证明，对任意$N>1$， 由推论5.4.12和命题4.4.1可知，对实数$N$存在一个自然数$n$使得$n \leq N < n + 1$，
现在把$[1, N]$划分成$n+1$个半开区间
\begin{align*}
  \{[1, 2),[2,3),...,[n-1, n), [n, N]\}
\end{align*}

由命题11.3.12可知
\begin{align*}
  \overline{\int}_{[1, N]} f & \leq \sum\limits_{j=1}^{n} \left( \sup\limits_{x \in [j, j+1)} f(x)  \right)
  + \sup\limits_{x \in [n, N]} f(x)                                                                         \\
                             & \leq \sum\limits_{j=1}^{n + 1} f(j)                                          \\
                             & \leq \sum\limits_{j=1}^{n + 1} \frac{1}{j^{N^\prime}}
\end{align*}
以上第二个等式由$f: [1, +\infty) \to \mathbb{R}$是一个单调递增的函数保证的。\\
由推论11.6.3可知$\int_{[1, N]} f$在$[1, N]$上是黎曼可积的。
于是
\begin{align*}
  \underline{\int}_{[1, N]} f = \overline{\int}_{[1, N]} f 
\end{align*}
因为$f$是非负的，所以
\begin{align*}
  \int_{[1, N]} f  \geq 0
\end{align*}
于是
\begin{align*}
  0 \leq \int_{[1, N]} f \leq \sum\limits_{j=1}^{n + 1} \frac{1}{j^{N^\prime}} \leq \sum\limits_{j=1}^{\infty} \frac{1}{j^{N^\prime}}
\end{align*}
由推论7.3.7可知$\sum\limits_{j=1}^{\infty} \frac{1}{j^{N^\prime}}$是收敛的，
综上，对任意$N > 1$都有$\int_{[1, N]} f$是有界的，由定理5.5.9（最小上界的存在性）可知
$\sup\limits_{N > 1}\int_{[1, N]} f$是有限的，利用命题11.6.4（积分判别法）可知
级数$\sum\limits_{n=1}^\infty f(n)$是收敛的。

（2）$p \leq 1$

由引理5.6.6(e)可知，$f$是关于$p$的增函数。由命题5.4.12（有理数对实数的界定）可知，存在正有理数$q$使得$q \leq p$，
由推论7.3.7可知$\sum\limits_{j=1}^{\infty} \frac{1}{j^{q}}$是发散的，
又对任意$n \in \mathbb{N}$都有$\frac{1}{n^p} \geq \frac{1}{n^q}$，
所以级数$\sum\limits_{n=1}^\infty f(n)$也是发散的。

\end{document}